<!DOCTYPE html>
<html lang="es">
  <head>
    <%- include('../partials/head', {title: 'Editá tu perfil'}) %>
    <link rel="stylesheet" href="/css/register.css" />
    <script src="/js/userEditValidations.js" defer></script>
    <script src="/js/editButton.js" defer></script>
  </head>
  <body>
    <%- include("../partials/header") %>

    <main class="reg-form-main reg-flex reg-flex-center">
      <div class="reg-hidden">
        <img src="/images/users/<%= user.avatar %>" alt="imagen de usuario" />
      </div>

      <form
        action="/users/<%= user.id %>?_method=put"
        method="post"
        enctype="multipart/form-data"
        class="reg-grow-70"
        id="editForm"
      >
        <div class="reg-mb-15">
          <span class="reg-span reg-font-w-600"
            >Edición de Perfil de <%= user.first_name %></span
          >
        </div>
        <div class="reg-mb-15">
          <label for="first_name" class="reg-label">Nombre:</label>
          <input
            type="text"
            name="first_name"
            id="first_name"
            placeholder="Ejemplo: Juan"
            class="reg-form-input"
            value="<%= user.first_name %>"
          />
          <% if (locals.errors && errors.first_name) { %>
          <div class="reg-text-danger"><%= errors.first_name.msg %></div>
          <% } %>
          <span class="errorMsg" id="first_nameError"></span>
        </div>
        <div class="reg-mb-15">
          <label for="last_name" class="reg-label">Apellido:</label>
          <input
            type="text"
            name="last_name"
            id="last_name"
            placeholder="Ejemplo: Perez"
            class="reg-form-input"
            value="<%= user.last_name%>"
          />
          <% if (locals.errors && errors.last_name) { %>
          <div class="reg-text-danger"><%= errors.last_name.msg %></div>
          <% } %>
          <span class="errorMsg" id="last_nameError"></span>
        </div>
        <div class="reg-mb-15">
          <label for="avatar" class="reg-label">Avatar:</label>
          <input type="file" name="avatar" id="avatar" class="reg-form-input" />
          <span class="errorMsg" id="avatarError"></span>
        </div>
        <div class="reg-mb-15 reg-flex">
          <% if (locals.errors && errors.avatar) { %>
          <div class="reg-text-danger"><%= errors.avatar.msg %></div>
          <% } %>
          <!-- Agregar enlace a archivo con política de privacidad y agregar validación checkbox que habilite boton enviar -->
          <input type="checkbox" name="privacy_policy" id="privacy_policy" />
          <label for="privacy_policy" class="reg-policy"
            >Hé leído y acepto la <a href="#">política de privacidad.</a></label
          >
        </div>
        <div class="reg-mb-15 reg-flex" style="justify-content: center">
          <button type="submit" class="reg-button">Guardar Cambios</button>
        </div>
        <div>
          <hr class="reg-linea" />
        </div>

        <div class="reg-mb-15 reg-flex">
          <button type="button" class="reg-button-login">
            <a href="/users/<%=user.id %>">Volver a mi perfil</a>
          </button>
        </div>
      </form>
    </main>
    <footer class="foot"><%- include("../partials/footer") %></footer>
  </body>
</html>
